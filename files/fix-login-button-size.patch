From 38d0f99d58d1ab63ed97fdc03016e3b0278eceff Mon Sep 17 00:00:00 2001
From: "F. von Gellhorn" <flinux@vongellhorn.ch>
Date: Thu, 17 Sep 2020 17:40:48 +0200
Subject: [PATCH 1/1] Fix login button size

---
 lookandfeel/contents/lockscreen/MainBlock.qml | 3 ++-
 sddm-theme/Login.qml                          | 4 ++--
 2 files changed, 4 insertions(+), 3 deletions(-)

diff --git a/lookandfeel/contents/lockscreen/MainBlock.qml b/lookandfeel/contents/lockscreen/MainBlock.qml
index 4bd5df0..70b43d9 100644
--- a/lookandfeel/contents/lockscreen/MainBlock.qml
+++ b/lookandfeel/contents/lockscreen/MainBlock.qml
@@ -97,7 +97,8 @@ SessionManagementScreen {
         PlasmaComponents.Button {
             id: loginButton
             Accessible.name: i18nd("plasma_lookandfeel_org.kde.lookandfeel", "Unlock")
-            implicitHeight: passwordBox.height - units.smallSpacing * 0.5 // otherwise it comes out taller than the password field
+            Layout.preferredHeight: passwordBox.implicitHeight
+            Layout.preferredWidth: loginButton.Layout.preferredHeight
 
             PlasmaCore.IconItem { // no iconSource because if you take away half a unit (implicitHeight), "go-next" gets cut off
                     anchors.fill: parent
diff --git a/sddm-theme/Login.qml b/sddm-theme/Login.qml
index 49d6805..3daaebf 100644
--- a/sddm-theme/Login.qml
+++ b/sddm-theme/Login.qml
@@ -112,8 +112,8 @@ SessionManagementScreen {
         PlasmaComponents.Button {
             id: loginButton
             Accessible.name: i18nd("plasma_lookandfeel_org.kde.lookandfeel", "Log In")
-            implicitHeight: passwordBox.height - units.smallSpacing * 0.5 // otherwise it comes out taller than the password field
-            Layout.rightMargin: 1 // prevents it from extending beyond the username field
+            Layout.preferredHeight: passwordBox.implicitHeight
+            Layout.preferredWidth: loginButton.Layout.preferredHeight
 
             PlasmaCore.IconItem { // no iconSource because if you take away half a unit (implicitHeight), "go-next" gets cut off
                 anchors.fill: parent
-- 
2.27.0

